<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Title, Favicon -->
		<title>SnailThrone Testing</title>
		<link rel="shortcut icon" href="favicon.png" type="image/x-icon">		
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="theme_bootstrap.css">
		<link rel="stylesheet" type="text/css" href="theme_snailthrone.css">		
	</head>
	
	<body>
		<!-- MODAL. EXPLAINS EVERYTHING. OPENED BY HELP. -->
		<div id="modal" class="modal">
			<div class="jumbotron modal-content">
				<span class="close">&times;</span><h2 align="center">Welcome to the Great Pyramid of Snails!</h2>
				<br><p><b>WHAT IS SNAILTHRONE?</b></p>
				<div class="infobox">
					<p>SnailThrone is a King of the Hill game: your goal is to climb to the top of the pyramid, and stay there long enough without anyone booting you off the throne.</p>
					<p>To claim the throne, you must sacrifice snails. Snails can be bought, hatched, and sold back to the game itself.</p>
					<p>In practical terms, SnailThrone is a smart contract running on the Ethereum blockchain. You must have MetaMask or a compatible Ethereum wallet to play.</p>
					<p align="right"><a href="https://medium.com/publicaio/a-complete-guide-to-using-metamask-updated-version-cd0d6f8c338f" target="_blank">More info on MetaMask</a></p>
				</div>
				<br><p><b>WHAT IS ETHEREUM?</b></p>
				<div class="infobox">
					<p>Ethereum is a decentralized network where programs can run autonomously. SnailThrone is one such program. 
					Nobody owns the game, and thousands of computers all over the world execute the game's programming as part of the Ethereum network.</p>
					<p>You may also know Ethereum as a cryptocurrency. The currency of the Ethereum network is called ether, or ETH. ETH is used to pay for transactions, as well as exchanges of value.</p>
					<p>SnailThrone requires ETH for both transactions and exchanges of value.</p>
					<p align="right"><a href="https://blockonomi.com/ethereum-guide/" target="_blank">Learn about Ethereum</a></p>
				</div>
				<br><p><b>HOW DOES SNAILTHRONE WORK?</b></p>
				<div class="infobox">
					<p>SnailThrone is a deterministic game. There is no randomness to the rules. Your actions have fixed outcomes, and the same goes for every player.</p>
					<p>To start, you will need to buy snails. Once you own a few snails, a variety of actions is available to you.
					<p>You can sacrifice some of your snails to claim the throne as the Pharaoh. If no other player is willing to sacrifice enough snails until the timer is over, you win this round's jackpot.
					<p>Your snails lay eggs consistently. You can hatch these eggs into even more snails, or you can feed these eggs to the FrogKing to get some ETH back.
					<p>At any point in the game, you can sell your snails back to the game. The ETH you will get for this action may be higher or lower than the ETH you spent to buy your snails, based on several factors expanded below.</p>
					<p>Last but not least, holding snails entitles you to a share of the ETH spent on buying or hatching snails.</p>
					<p>As long as you have snails, you will passively get ETH for as long as other players participate.</p>
					<p align="right"><a href="#info" onclick="closeModal()">Game rules explained</a></p>
				</div>
				<br><p><b>IS THE GAME SECURE?</b></p>
				<div class="infobox">
					<p>Smart contracts act exactly as defined, and the source code is open for anyone to read.</p>
					<p>The game lives on the Ethereum blockchain and would go on without interruption even if the website went down.</p>
					<p>The Ethereum blockchain itself is secured by hundreds of millions of dollars worth of redundancy. Your bank is less secure than this!</p>
					<p>The biggest risks with decentralized applications have to do with *your own* security.
					<p>Transactions are irreversible, and nobody can refund you if you're not happy with your purchase.
					<p>Make sure you write your private key down. Keep it safe, and don't share it with anyone else.
					<p align="right"><a href="https://hackernoon.com/everything-you-need-to-know-about-smart-contracts-a-beginners-guide-c13cc138378a?gi=d005680f1f69" target="_blank">Further reading on Smart Contracts</a></p>
				</div>
				<br><p><b>IS THIS AN INVESTMENT VEHICLE?</b></p>
				<div class="infobox">
					<p>No! This is a zero-sum game, meaning each participant's gains are balanced by another participant's losses.</p>
					<p>SnailThrone is a game of math and logic, with no randomness involved. The correct strategy will lead to success, and there can be many winners.
					But there will be many losers as well.</p>
					<p>Even though SnailThrone isn't gambling, you shouldn't play this game if you're susceptible to gambling addiction.</p>
					<p>Make sure you familiarize yourself with the rules, and don't play with ETH you can't afford to lose. If you want to try out the game in a safe environment,
					head over to the TEST version on the Ropsten network, where ETH is free.</p>
					<p align="right"><a href="https://www.helpguide.org/articles/addictions/gambling-addiction-and-problem-gambling.htm" target="_blank">Gambling Addiction</a></p>
				</div>
				<br><p><b>I HAVE MORE QUESTIONS!</b></p>
				<div class="infobox">
					<p>Come join us on Discord!</p>
					<p>There's a wealth of information available in previous discussions, and the community can answer your questions.</p>
					<p align="right"><a href="https://discord.gg/8h3Emyb" target="_blank">Discord Link</a></p>
				</div>
			</div>
		</div>
		<!-- TITLE. ICONS LINKING TO CONTRACT, SOCIAL MEDIA, HELP. -->
		<div class="jumbotron">
			<input type="image" src="img/question_circle.png" class="icon-align-right" id="helpmodal" />
			<a href="https://ropsten.etherscan.io/address/0xcf9bb23c49f5b32128665282dab483ed2d414235"><img class="icon-align-right" src="img/contract_circle.png"></a>
			<a href="https://discord.gg/8h3Emyb"><img class="icon-align-right" src="img/discord_circle.png"></a>
			<a href="https://twitter.com/EtherSnailFarm"><img class="icon-align-right" src="img/twitter_circle.png"></a>
			<a name="top"><h1>SNAILTHRONE</h1></a>
		</div>
		<br>		
		<!-- HEADER. CONTAINS CURRENT WINNER, TIMER, AND POT. -->
		<div class="container">
			<div align="center">
				<h4>Round <span id="godround">[Loading...]</span></h4><br>
				<div class="ether">
					<br><h2 class="pot"><span id="roundpot">[Loading...]</span> ETH</h2><br>
				</div><br>
				<div class="pyramid">
				<h2><span id="pharaoh">[Loading...]</span></h2>
				<h1><span id="godtimer">[Loading...]</span></h1>
				<br><br>
				<span id="showroundon"><button type="button" class="btn btn-danger" onclick="webSacrificeSnail()">Claim the Throne</button>
				<br><small>Sacrifice required: <span id="pharaohreq">[Loading...]</span> Snails</small></span>
				<br><br>
				<span id="showroundoff"><button type="button" class="btn btn-danger" onclick="webAscendGod()">Start new Round</button>
				<br><small>(will only work if timer is at 0)</small></span>
				<br><br><br>
				</div>
			</div>
		</div>
		
		<!-- SNAILS -->
		<!-- BUY ON LEFT, SNAILS ON MIDDLE, SELL ON RIGHT. -->
		<div class="jumbotron border-double" align="center">
			<img class="icon-align-left" src="img/snail_circle.png"><img class="icon-align-right" src="img/snail_circle.png">
			<h2>MY SNAILS</h2>
			<h4><span id="playersnail">[Loading...]</span> Snails</h4>
			<h6>(estimate worth: <span id="playersnailvalue">[Loading...]</span> ETH)</h6><br>
			<div class="card-deck" style="max-width: 60rem;">
				<div class="card mb-3">
					<div class="card-header">
						<h4>Buy</h4>
					</div>
					<div class="card-body">
						<p>Snail cost: <span id="tokenprice">[Loading...]</span> ETH</p>
						<p>ETH to spend? <input type="text" id="fieldBuy" value="0.1" size="4"> ETH</p>
						<button type="button" class="btn btn-danger" onclick="webBuySnail()">Buy <span id="fieldBuy2">[Loading...]</span> ETH in Snails</button>
						<br><small>(maximum: 4 ETH)</small>
					</div>
				</div>
				<div class="card mb-3">
					<div class="card-header" align="center">
						<h4>Rule</h4>
					</div>
					<div class="card-body">
						<p>Sacrifice required: <span id="pharaohreq2">[Loading...]</span> Snails</p>
						<p>Snails to sacrifice? <input type="text" id="fieldSacrifice" value="40" size="4"></p>
						<button type="button" class="btn btn-danger" onclick="webSacrificeSnail()">Sacrifice <span id="fieldSacrifice2">[Loading...]</span> Snails</button>
						<br><small>(minimum requirement for next pharaoh will increase by the number of snails you sacrifice)</small>
					</div>
				</div>
				<div class="card mb-3">
					<div class="card-header" align="center">
						<h4>Sell</h4>
					</div>
					<div class="card-body">
						<p>Snail value: <span id="tokensellprice">[Loading...]</span> ETH
						<p>Maximum sale: <span id="maxsnailsell">[Loading...]</span> Snails</p>
						<p>Snails to sell? <input type="text" id="fieldSell" value="1000" size="4"></p>
						<button type="button" class="btn btn-danger" onclick="webSellSnail()">Sell <span id="fieldSell2">[Loading...]</span> Snails</button>
						<br><small>(approximately <span id="sellEstimate">[Loading...]</span> ETH)</small>
					</div>
				</div>
			</div>
		</div>
		<br>
		<!-- EGGS -->
		<!-- HATCH ON LEFT, FEED ON RIGHT. -->
		<div class="jumbotron" align="center">
			<img class="icon-align-left" src="img/egg_circle.png"><img class="icon-align-right" src="img/egg_circle.png">
			<h2>MY EGGS</h2>
			<h4><span id="playeregg">[Loading...]</span> eggs</h4>
			<h6>(producing <span id="playerprod">[Loading...]</span> eggs per hour)</h6><br>
			<div class="card-deck" style="max-width: 52rem;">
				<div class="card mb-3">
					<div class="card-header">
						<h4>Hatch</h2>
					</div>
					<div class="card-body">
						<p>ETH needed to hatch: <span id="fullhatchcost">[Loading...]</span> (<span id="hatchprice">[Loading...]</span> per egg)</p>
						<button type="button" class="btn btn-danger" onclick="webHatchEgg()">Hatch My Eggs</button>
					</div>
				</div>
				<div class="card mb-3">
					<div class="card-header" align="center">
						<h4>Feed</h2>
					</div>
					<div class="card-body">
						<p>ETH reward: <span id="fullfeedreward">[Loading...]</span> (<span id="feedreward">[Loading...]</span> per egg)</p>
						<button type="button" class="btn btn-danger" onclick="webFeedFrog()">Feed The Frogking</button>
					</div>
				</div>
			</div>
		</div>
		<br>
		<!-- REWARDS -->
		<!-- CLAIM ON LEFT, WITHDRAW ON RIGHT. -->
		<div class="jumbotron" align="center">
			<img class="icon-align-left" src="img/ether_circle.png"><img class="icon-align-right" src="img/ether_circle.png">
			<h2>MY REWARDS</h2><br>
			<div class="card-deck" style="max-width: 40rem;">
				<div class="card mb-3">
					<div class="card-header">
						<h4>Claim</h2>
					</div>
					<div class="card-body">
						<p>Unclaimed dividends: <span id="playerdiv">[Loading...]</span> ETH</p>
						<button type="button" class="btn btn-danger" onclick="webClaimDiv()">Claim Dividends</button>
					</div>
				</div>
				<div class="card mb-3">
					<div class="card-header" align="center">
						<h4>Withdraw</h2>
					</div>
					<div class="card-body">
						<p>Current balance: <span id="playerearning">[Loading...]</span> ETH</p>
						<button type="button" class="btn btn-danger" onclick="webWithdrawEarning()">Withdraw My Earnings</button>
					</div>
				</div>
			</div>
		</div>
		<br>
		<!-- REF LINK -->
		<div class="jumbotron" align="center">
			<h2>MY REFERRAL</h2><br>
			<h5>Your referral link is <span id="playerreflink">[Loading...]</span></h5><br>
			<p>When someone else uses your referral link to buy snails, you receive <h4>6%</h4> of the ETH spent.</p>
			<p>In the absence of a referral, this 6% fee goes to the GodPot. There is nothing to lose from using a referral link!</p>
		</div>
		<br>
		<!-- MISC STATS -->
		<div class="jumbotron border-solid" align="center">
			<h4>STATISTICS</h4>
			<p>Total number of snails: <span id="maxsnail">[Loading...]</span></p>
			<p>Maximum lifetime dividends per snail: <span id="maxdiv">[Loading...]</span> ETH</p>
			<p>ETH in contract: <span id="contractbalance">[Loading...]</span> ETH</p>
			<p>Godpot: <span id="godpot">[Loading...]</span> ETH</p>
			<p>Frogking pot: <span id="frogpot">[Loading...]</span> ETH</p>
			<p>Snailpot: <span id="snailpot">[Loading...]</span> ETH</p>
		</div>
		<br>		
		<!-- EXPLANATION -->
		<div class="jumbotron border-dashed">
			<a name="info"><h4>QUICK START</h4></a><br>
			<div class="infobox">
				<p>BUY and SELL snails (pyramid tokens) directly from the contract.</p>
				<p>Snail holders receive proportional DIVIDENDS from buys and hatches, as well as from other Snail games (in the future).</p>
				<p>Token price correlates with snail max supply. More snails = higher price.</p>
				<p>Snails produce EGGS, at a rate of 8% per day. A hatchery can hold as many eggs as there are snails.</p>
				<p>Players can HATCH these eggs to turn them into more snails. Hatching still costs ether, but only half of the normal price.</p>
				<p>Players can also FEED their eggs to the FrogKing for an ETH reward.</p>
				<p>Players can SACRIFICE a certain amount of snails to hold the title of Pharaoh. The Pharaoh earns dividends on every buy, and if the timer runs out, the Pharaoh can claim the GodPot.</p>
			</div>
			<br>	
			<p><b>ETH distribution on buy:</b></p>
			<div class="infobox">
				<p>- 50% saved for the SnailPot (token price on sale)</p>
				<p>- 20% distributed in divs</p>
				<p>- 20% go to the FrogPot</p>
				<p>- 2% is given to the current Pharaoh</p>
				<p>- 2% goes to the GodPot</p>
				<p>- 6% goes to the referral. If there is no referral, it goes to the SnailGod pot</p>
			</div>
			<br>	
			<p><b>ETH distribution on hatch:</b></p>
			<div class="infobox">
				<p>- 40% in divs</p>
				<p>- 40% to the FrogPot</p>
				<p>- 4% to the current Pharaoh</p>
				<p>- 16% to the GodPot</p>
			</div>
			<br>
			<p><b>SNAILPOT (sell fund)</b></p>
			<div class="infobox">
				<p>Snails can be sold to the SnailPot for ETH.</p> 
				<p>Price per snail is 50% of the current buy price.</p>
				<p>No more than 10% of the SnailPot can be drained in one sale!</p>
				<p>This means it is easier to sell small quantities of snails than large ones.</p>
				<p>Regardless, a player can chain sales one after another, without downtime.</p>
			</div>
			<br>
			<p><b>FROGPOT (feed egg fund)</b></p>
			<div class="infobox">
				<p>Feeding eggs to the frogking grants a reward.</p>
				<p>ETH earned = frogpot * eggs fed / total snails</p>
			</div>
			<br>
			<p><b>GODPOT (jackpot fund)</b></p>
			<div class="infobox">
				<p>Given to the current Pharaoh when the timer hits 0. This timer starts at 24 hours on each new round.</p>
				<p>Sacrifice the indicated snail amount to become the Pharaoh. While the Pharaoh sits on the throne, he receives ETH from every buy and hatch.</p>
				<p>Every 12 seconds, one snail is removed from the required sacrifice. The minimum required is 40 snails.
				<p>A successful sacrifice will bump the timer back up by 8 minutes, and add the amount of snails sacrificed to the requirement.</p>
				<p>Once the timer hits 0, whoever holds the Pharaoh title ascends to godhood. This new SnailGod can claim the round pot.</p>
				<p>After the pot is claimed, the timer resets at 24 hours. Whoever starts the new round is Pharaoh.</p>
			</div>
			<br>
			<p><b>REFERRALS</b>
			<div class="infobox">
				<p>Unlocked by owning at least 300 snails. Every buy through a referral link gives 6% to the referred address.</p>
				<p>Addresses aren't bound to their referral link. Referrals don't profit from hatching eggs.</p>
				<p>Referring your own address won't work! Grab your nearest friend instead.</p>
			</div>
			<br>
			<a href="#top"><img class="icon-block-center" src="img/arrow_circle.png"></a>
		</div>	
		
		<!-- Main Javascript -->
		<script src="main.js"></script>		
		<!-- Web3 ABI -->
		<script src="snailabi.js"></script>			
	    <!-- Execute main() once -->
		<script>
			main()
		</script>
		
	</body>
</html>